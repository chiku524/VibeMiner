# Cloudflare Workers configuration for VibeMiner (vibeminer.tech)
#
# Cloudflare resource IDs (D1, KV) are set below. R2 uses bucket name.
# account_id is injected by CI from CLOUDFLARE_ACCOUNT_ID secret (avoids /memberships API 9106).

name = "vibeminer"
main = ".open-next/worker.js"
account_id = "INJECT_ACCOUNT_ID"
compatibility_date = "2024-11-11"
compatibility_flags = ["nodejs_compat"]

[vars]
NEXT_PUBLIC_APP_URL = "https://vibeminer.tech"

[assets]
directory = ".open-next/assets"
binding = "ASSETS"

# D1 Database (vibeminer-db, region ENAM)
[[d1_databases]]
binding = "DB"
database_name = "vibeminer-db"
database_id = "70339ee5-4d00-4c63-b829-c075bb37c025"

# KV Namespace (SESSIONS)
[[kv_namespaces]]
binding = "KV"
id = "a6b29305a6794e35a9a3b83bbd511d06"

# R2 Bucket - create with: npx wrangler r2 bucket create vibeminer-storage
[[r2_buckets]]
binding = "R2"
bucket_name = "vibeminer-storage"
